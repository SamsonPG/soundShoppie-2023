<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>
      <%=locals.title?'soundShoppie ' +locals.title:'soundShoppie'%>
    </title>
    <meta
      name="description"
      content="Welcome to soundShoppie... an audio lovers first destination. we started
      our journey with a shared love for headphones and the
      desire to share this passion with others. They strongly believe that
      great sound is one of life's purest pleasures and that quality audio
      devices by extension lead to a better life."
    />
    <meta
      name="keywords"
      content="soundShoppie, soundshoppie, headphone, earphone, iem, wired earphone, wireless earphone, sounshoppie.de"
    />
    <meta name="author" content="samson" />
    <link rel="icon" type="image/x-icon" href="/public/images/favicon.ico" />

    <style>
      .nav-link.dropdown-toggle {
        display: flex;
        align-items: center;
      }

      .dropdown-menu .dropdown-item {
        white-space: nowrap;
      }
    </style>
    <style>
      /* CSS for the spinner */
      .spinner-container {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        z-index: 9999;
      }

      /* CSS for the image */
      .spinner-image {
        width: 100px;
      }
    </style>
    <script>
      function next() {
        window.history.forward();
      }

      function previous() {
        window.history.back();
      }
    </script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.6.1/nouislider.min.css"
    />
    <link href="/public/style/style.css" rel="stylesheet" />
    <link href="/public/script/script.js" rel="JavaScript" />
    <!-- bootstrap 5 css -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl"
      crossorigin="anonymous"
    />
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <style>
      /* Custom Styles */
      @media (max-width: 767.98px) {
        /* Center alignment for smaller screens */
        .navbar .d-flex.justify-content-start.align-items-center,
        .navbar .d-flex.justify-content-end.align-items-center {
          justify-content: center;
        }

        /* Adjust search box alignment */
        .navbar .d-flex.align-items-center form {
          margin-left: auto;
          margin-right: auto;
        }
      }

      @media (min-width: 768px) {
        /* Left elements alignment */
        .navbar .d-flex.justify-content-start.align-items-center {
          justify-content: flex-start;
        }

        /* Center elements alignment */
        .navbar .d-flex.align-items-center {
          justify-content: center;
        }
      }
    </style>
    <!--Start of Tawk.to Script-->
    <script type="text/javascript">
      var Tawk_API = Tawk_API || {},
        Tawk_LoadStart = new Date();
      (function () {
        var s1 = document.createElement("script"),
          s0 = document.getElementsByTagName("script")[0];
        s1.async = true;
        s1.src = "https://embed.tawk.to/64b64ae1cc26a871b0291628/1h5k190ru";
        s1.charset = "UTF-8";
        s1.setAttribute("crossorigin", "*");
        s0.parentNode.insertBefore(s1, s0);
      })();
    </script>
    <!--End of Tawk.to Script-->
  </head>

  <body>
    <!-- Loading spinner -->
    <div id="loading-spinner" class="spinner-container">
      <img
        class="spinner-image"
        src="/public/images/SOUNDSHOPPIE LOGO BLACK.png"
        alt="soundShoppie Loading..."
      />
    </div>
    <script>
      // Remove the spinner element when the page has finished loading
      window.addEventListener("load", function () {
        var spinner = document.getElementById("loading-spinner");
        spinner.parentNode.removeChild(spinner);
      });
    </script>
    <header>
      <!-- Navbar -->
      <nav
        class="navbar navbar-expand-lg navbar-light fixed-top"
        style="background-color: #c9bc43"
      >
        <div class="container">
          <button
            type="button"
            class="btn btn-warning"
            onClick="previous()"
            id="backward"
            style="background-color: #c9bc43; border: none; font-size: 20px"
          >
            &#10094;
          </button>
          <!-- Logo -->
          <a class="navbar-brand" href="/">
            <img
              src="/public/images/SOUNDSHOPPIE LOGO BLACK.png"
              height="35"
              alt="Logo"
            />
          </a>

          <!-- Navbar toggler -->
          <button
            class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-target="#navbarCollapse"
            aria-controls="navbarCollapse"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <div class="navbaruserprofile d-flex align-items-center">
              <% if (locals.user && locals.user.image) { %>
              <img
                src="/userimage/<%= locals.user.image %>"
                class="rounded-circle mt-1"
                height="22"
                width="22"
                alt="User Avatar"
                loading="lazy"
              />
              <% } else { %>
              <img
                src="/public/images/default-avatar.jpeg"
                class="rounded-circle mt-1"
                height="22"
                width="22"
                alt="Default Avatar"
                loading="lazy"
              />
              <% } %>
              <span class="navbar-toggler-icon ml-2"></span>
            </div>
          </button>

          <!-- Navbar links -->
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <!-- Left elements -->
            <ul class="navbar-nav mr-auto">
              <li class="nav-item">
                <% if(locals.user) { %>
                <a class="nav-link active" aria-current="page" href="/userHome"
                  >Home</a
                >
                <% } else { %>
                <a class="nav-link" aria-current="page" href="/">Home</a>
                <% } %>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/viewproducts">Products</a>
              </li>
              <% if (locals.user ) { %>
              <li class="nav-item">
                <a class="nav-link" href="/user/oders/<%= user._id %>"
                  >My Orders</a
                >
              </li>
              <% } %>
            </ul>

            <!-- Center elements -->
            <!-- The search form -->
            <form id="searchForm" class="form-inline my-2 my-md-0">
              <div class="search-container">
                <input
                  id="searchInput"
                  autocomplete="off"
                  type="search"
                  class="form-control rounded-0"
                  placeholder="Search"
                />
                <button
                  class="btn btn-outline-light btn-border-0 my-2 my-sm-0 rounded-0"
                  style="background-color: black; border-color: transparent"
                  type="submit"
                >
                  <i class="fas fa-search"></i>
                </button>
              </div>
            </form>

            <!-- Right elements -->
            <ul class="navbar-nav ml-auto">
              <% if (locals.user) { %>
              <li class="nav-item">
                <a
                  class="btn btn-link text-reset me-3"
                  style="background: transparent"
                  href="/wishlist"
                >
                  <span><i class="fa-solid fa-heart"></i> Fav</span>
                  <!-- <span class="badge rounded-pill badge-notification bg-success"
                    >1</span
                  > -->
                </a>
              </li>
              <li class="nav-item">
                <a
                  class="btn btn-link text-reset me-3"
                  style="background: transparent"
                  href="/cart"
                >
                  <span><i class="fas fa-shopping-cart"></i> Cart</span>

                  <span class="badge rounded-pill badge-notification bg-danger">
                    <% if (cart && cart.products && cart.products.length > 0) {
                    %> <%= cart.products.length %> <% } else { %> 0 <% } %>
                  </span>
                </a>
              </li>
              <% } else { %>
              <li class="nav-item">
                <a
                  class="btn btn-link text-reset me-3"
                  style="background: transparent"
                  href="/login."
                >
                  <span><i class="fa-solid fa-heart"></i> Fav</span>
                  <!-- <span class="badge rounded-pill badge-notification bg-danger"
                    >1</span
                  > -->
                </a>
              </li>
              <li class="nav-item">
                <a
                  class="btn btn-link text-reset me-3"
                  style="background: transparent"
                  href="/login."
                >
                  <span><i class="fas fa-shopping-cart"></i> Cart</span>
                  <!-- <span class="badge rounded-pill badge-notification bg-danger"
                    >1</span
                  > -->
                </a>
              </li>
              <% } %>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle align-items-center"
                  href="#"
                  id="navbarDropdownMenuLink"
                  role="button"
                  data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false"
                >
                  <% if(locals.user && locals.user.image) { %>
                  <img
                    src="/userimage/<%= locals.user.image %>"
                    class="rounded-circle mr-2"
                    height="22"
                    width="22"
                    alt="User Avatar"
                    loading="lazy"
                  />
                  <% } else { %>
                  <img
                    src="/public/images/default-avatar.jpeg"
                    class="rounded-circle mr-2"
                    height="22"
                    width="22"
                    alt="Default Avatar"
                    loading="lazy"
                  />
                  <% } %> <% if(locals.user) { %> <% const userName =
                  locals.user.name.length > 7 ? locals.user.name.substring(0, 7)
                  + '...' : locals.user.name; %>
                  <span class="h6"><%= userName %></span>
                  <% } else { %>
                  <span class="h6">Hello Friend</span>
                  <% } %>
                  <span class="dropdown-toggle-arrow"></span>
                </a>
                <div
                  class="dropdown-menu dropdown-menu-right"
                  aria-labelledby="navbarDropdownMenuLink"
                >
                  <% if (locals.user) { %>
                  <a class="dropdown-item" href="/userProfile">User Profile</a>
                  <a class="dropdown-item" href="/userlogout">Log Out</a>
                  <% } else { %>
                  <a class="dropdown-item" href="/login.">Login</a>
                  <!-- <a class="dropdown-item" href="/signup.">Sign Up</a> -->
                  <a class="dropdown-item" href="/signupMobile">Sign Up</a>
                  <% } %>
                </div>
              </li>
            </ul>
          </div>

          <button
            type="button"
            class="btn btn-warning"
            onclick="next()"
            id="forward"
            style="background-color: #c9bc43; border: none; font-size: 20px"
          >
            &#10095;
          </button>
        </div>
      </nav>
      <!-- <div id="searchResults"></div> -->
      <div id="searchResultsModal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <div id="searchResults"></div>
        </div>
      </div>
    </header>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.10.2/umd/popper.min.js"></script>

    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  </body>
</html>
